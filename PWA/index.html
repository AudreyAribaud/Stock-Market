<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Stock Market Screener & Backtest - Analysez et testez vos strat√©gies de trading">
    <meta name="theme-color" content="#1a1a2e">
    <title>Stock Market Screener & Backtest</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="logo">üöÄ Stock Market Screener</h1>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Tabs Navigation -->
            <div class="tabs">
                <button class="tab-button active" data-tab="screening">
                    <span class="tab-icon">üîç</span>
                    Screening
                </button>
                <button class="tab-button" data-tab="backtest">
                    <span class="tab-icon">üìä</span>
                    Backtest
                </button>
                <button class="tab-button" data-tab="settings">
                    <span class="tab-icon">‚öôÔ∏è</span>
                    Param√®tres
                </button>
            </div>

            <!-- Screening Tab -->
            <div id="screening" class="tab-content active">
                <div class="card">
                    <h2 class="card-title">Param√®tres de Screening</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="priceMin">Prix minimum ($)</label>
                            <input type="number" id="priceMin" value="25" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="priceMax">Prix maximum ($)</label>
                            <input type="number" id="priceMax" value="250" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="marketCapMin">Market Cap minimum ($)</label>
                            <input type="number" id="marketCapMin" value="1000000000" min="0" step="100000000">
                        </div>
                        
                        <div class="form-group">
                            <label for="avgVolumeMin">Volume moyen 30j minimum</label>
                            <input type="number" id="avgVolumeMin" value="1000000" min="0" step="100000">
                        </div>
                        
                        <div class="form-group">
                            <label for="volumeMin">Volume minimum</label>
                            <input type="number" id="volumeMin" value="1000000" min="0" step="100000">
                        </div>
                        
                        <div class="form-group">
                            <label for="changeMin">Variation minimum (%)</label>
                            <input type="number" id="changeMin" value="0" min="0" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="relativeVolumeMin">Relative Volume minimum</label>
                            <input type="number" id="relativeVolumeMin" value="1.2" min="0" step="0.1">
                        </div>
                    </div>
                    
                    <div class="checkbox-group">
                        <h3>Filtres SMA</h3>
                        <label class="checkbox-label">
                            <input type="checkbox" id="useSma50" checked>
                            <span>SMA50 < Close</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="useSma100" checked>
                            <span>SMA100 < Close</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="useSma200" checked>
                            <span>SMA200 < Close</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="useVwapFilter" checked>
                            <span>VWAP 5m <= price</span>
                        </label>
                    </div>
                    
                    <button id="startScreening" class="btn btn-primary">
                        üîç Lancer le screening LONG
                    </button>
                </div>
                
                <!-- Results -->
                <div id="screeningResults" class="card results-card" style="display: none;">
                    <h2 class="card-title">R√©sultats du Screening</h2>
                    <div id="resultsCount" class="results-count"></div>
                    <div id="resultsTable" class="results-table"></div>
                </div>
            </div>

            <!-- Backtest Tab -->
            <div id="backtest" class="tab-content">
                <div class="card">
                    <h2 class="card-title">Configuration du Backtest</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="initialCapital">Capital initial ($)</label>
                            <input type="number" id="initialCapital" value="10000" min="1000" step="1000">
                        </div>
                        
                        <div class="form-group">
                            <label for="allocPct">Allocation par trade (%)</label>
                            <input type="range" id="allocPct" value="10" min="1" max="100">
                            <span class="range-value" id="allocPctValue">10%</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="leverage">Levier</label>
                            <input type="range" id="leverage" value="1" min="1" max="5">
                            <span class="range-value" id="leverageValue">1x</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="lookbackDays">Jours d'historique</label>
                            <input type="range" id="lookbackDays" value="15" min="1" max="30">
                            <span class="range-value" id="lookbackDaysValue">15</span>
                        </div>
                    </div>
                    
                    <button id="startBacktest" class="btn btn-primary">
                        üìä Lancer le backtest LONG
                    </button>
                </div>
                
                <!-- Backtest Results -->
                <div id="backtestResults" class="card results-card" style="display: none;">
                    <h2 class="card-title">R√©sultats du Backtest</h2>
                    <div id="backtestMetrics" class="metrics-grid"></div>
                    <div id="backtestCharts" class="charts-container"></div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="card">
                    <h2 class="card-title">Param√®tres de la Strat√©gie</h2>
                    
                    <div class="settings-section">
                        <h3>Profit Target</h3>
                        <label class="checkbox-label">
                            <input type="checkbox" id="enableProfitTarget" checked>
                            <span>Activer le profit target</span>
                        </label>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="profitPct">Profit cible (%)</label>
                                <input type="number" id="profitPct" value="1.0" min="0.1" max="100" step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="profitAmount">Profit cible ($)</label>
                                <input type="number" id="profitAmount" value="50" min="1" max="10000" step="1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Keybars Inputs</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="keybarAtrLength">ATR longueur</label>
                                <input type="number" id="keybarAtrLength" value="390" min="1" max="1000" step="1">
                            </div>
                            <div class="form-group">
                                <label for="keybarAtrMult">ATR multiplicateur</label>
                                <input type="number" id="keybarAtrMult" value="1.0" min="0.1" max="10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="keybarVolAvgLength">Volume Average Length</label>
                                <input type="number" id="keybarVolAvgLength" value="390" min="1" max="1000" step="1">
                            </div>
                            <div class="form-group">
                                <label for="keybarMinBodyPct">Minimum Body size (%)</label>
                                <input type="number" id="keybarMinBodyPct" value="75.0" min="0" max="100" step="0.1">
                            </div>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="volumeSmaCheck">
                            <span>Activer le filtre Volume SMA</span>
                        </label>
                        <div class="form-group">
                            <label for="volumeSmaLength">Volume SMA Length</label>
                            <input type="number" id="volumeSmaLength" value="50" min="1" max="1000" step="1">
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>RRS Inputs</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="rrsPriceChangeLength">Price change length</label>
                                <input type="number" id="rrsPriceChangeLength" value="12" min="1" max="100" step="1">
                            </div>
                            <div class="form-group">
                                <label for="rrsAtrLength">ATR longueur</label>
                                <input type="number" id="rrsAtrLength" value="12" min="1" max="100" step="1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Relative Volume</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="rvolNDayAvg">N Day average</label>
                                <input type="number" id="rvolNDayAvg" value="5" min="1" max="30" step="1">
                            </div>
                            <div class="form-group">
                                <label for="rvolHighlightThres">RVol Highlight Thres</label>
                                <input type="number" id="rvolHighlightThres" value="1.5" min="0.1" max="10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="rvolSoftHighlightThres">RVol Soft Highlight Thres</label>
                                <input type="number" id="rvolSoftHighlightThres" value="1.2" min="0.1" max="10" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>ATR Trailing Stop</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nAtrPeriod">ATR Trailing Stop Period</label>
                                <input type="number" id="nAtrPeriod" value="14" min="1" max="100" step="1">
                            </div>
                            <div class="form-group">
                                <label for="nAtrMultip">ATR Trailing Stop Multiplicateur</label>
                                <input type="number" id="nAtrMultip" value="2.0" min="0.1" max="10" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Signal Checklist Long</h3>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkAlignedRelativeStrength" checked>
                                <span>Aligned relative strength filter</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkRrs30mCrossover" checked>
                                <span>RRS 30m crossover 0</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkKeybarVwapBreakout" checked>
                                <span>Keybar VWAP breakout</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkRedToGreenStrike" checked>
                                <span>Red to green strike</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkHaBullishReversal" checked>
                                <span>HA Bullish reversal</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkBullishThrust" checked>
                                <span>Bullish thrust</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkAtrTrailingStopBullishCross" checked>
                                <span>ATR trailing stop bullish cross</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="checkBreakoutHod1" checked>
                                <span>Breakout of HOD[1]</span>
                            </label>
                        </div>
                    </div>
                    
                    <button id="saveSettings" class="btn btn-secondary">
                        üíæ Sauvegarder les param√®tres
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p class="loading-text">Chargement en cours...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
